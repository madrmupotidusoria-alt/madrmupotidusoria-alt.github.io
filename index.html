<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>SCANORA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <style>
        body {
            font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            margin: 0;
            padding: 0;
            background: #000;
            color: #fff;
        }
        .glow {
            position: absolute;
            width: 600px;
            height: 600px;
            border-radius: 9999px;
            filter: blur(48px);
            background: rgba(59,130,246,0.18);
            left: calc(50% - 300px);
            top: 8rem;
            animation: float 15s ease-in-out infinite;
            z-index: 0;
        }
        @keyframes float {
            0% { transform: translate(0, 0); }
            33% { transform: translate(100px, -50px); }
            66% { transform: translate(-100px, 50px); }
            100% { transform: translate(0, 0); }
        }
        .nav-button {
            transition: all 0.3s ease;
        }
        .nav-button:hover {
            color: #fff;
            transform: translateY(-1px);
        }
        .form-input {
            background: #111827;
            border: 1px solid #374151;
            color: #fff;
            transition: all 0.3s ease;
        }
        .form-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        .btn-primary {
            background: #3b82f6;
            color: #fff;
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            background: #2563eb;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.3);
        }
        .btn-secondary {
            background: #374151;
            color: #fff;
            transition: all 0.3s ease;
        }
        .btn-secondary:hover {
            background: #4b5563;
        }
        .card {
            background: rgba(17, 24, 39, 0.8);
            border: 1px solid #374151;
            transition: all 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            border-color: #4b5563;
            box-shadow: 0 20px 40px rgba(59, 130, 246, 0.2);
        }
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #3b82f6;
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        const { createRoot } = ReactDOM;

        // Supabase configuration
        const supabaseUrl = 'https://sb_publishable_i2050anXy9VyKvBs0_GpTg_J52BP_72.supabase.co';
        const supabaseKey = 'sb_publishable_i2050anXy9VyKvBs0_GpTg_J52BP_72';
        const { createClient } = window.supabase;
        const supabase = createClient(supabaseUrl, supabaseKey);

        function App() {
            const [isLoggedIn, setIsLoggedIn] = useState(false);
            const [showLogin, setShowLogin] = useState(false);
            const [showRegister, setShowRegister] = useState(false);
            const [currentPage, setCurrentPage] = useState('home');
            const [user, setUser] = useState(null);
            const [loading, setLoading] = useState(false);

            // Check for existing session on mount
            useEffect(() => {
                const getSession = async () => {
                    const { data: { session } } = await supabase.auth.getSession();
                    setUser(session?.user ?? null);
                    setIsLoggedIn(!!session?.user);
                };

                getSession();

                // Listen for auth changes
                const { data: { subscription } } = supabase.auth.onAuthStateChange((_event, session) => {
                    setUser(session?.user ?? null);
                    setIsLoggedIn(!!session?.user);
                });

                return () => subscription.unsubscribe();
            }, []);

            const handleNavClick = (item) => {
                if (item === 'Discord') {
                    window.open('https://discord.gg/xtce', '_blank');
                    return;
                }
                if (item === 'Dashboard' && !isLoggedIn) {
                    setShowLogin(true);
                    return;
                }
                if (item === 'Login') {
                    setShowLogin(true);
                    setShowRegister(false);
                    return;
                }
                if (item === 'Register') {
                    setShowRegister(true);
                    setShowLogin(false);
                    return;
                }
                if (item === 'Pricing') {
                    window.location.href = '/pricing.html';
                    return;
                }
                setCurrentPage(item.toLowerCase());
            };

            const handleLogin = async (e) => {
                e.preventDefault();
                setLoading(true);
                const email = e.target.email.value;
                const password = e.target.password.value;
                
                try {
                    const { data, error } = await supabase.auth.signInWithPassword({
                        email,
                        password,
                    });
                    
                    if (error) {
                        alert('Login error: ' + error.message);
                    } else {
                        setIsLoggedIn(true);
                        setShowLogin(false);
                        setCurrentPage('dashboard');
                        alert('Login successful!');
                    }
                } catch (error) {
                    alert('Login error: ' + error.message);
                } finally {
                    setLoading(false);
                }
            };

            const handleRegister = async (e) => {
                e.preventDefault();
                setLoading(true);
                const email = e.target.email.value;
                const password = e.target.password.value;
                const username = e.target.username.value;
                
                try {
                    const { data, error } = await supabase.auth.signUp({
                        email,
                        password,
                        options: {
                            data: {
                                username: username,
                            }
                        }
                    });
                    
                    if (error) {
                        alert('Registration error: ' + error.message);
                    } else {
                        alert('Registration successful! Please check your email to verify.');
                        setShowRegister(false);
                        setShowLogin(true);
                    }
                } catch (error) {
                    alert('Registration error: ' + error.message);
                } finally {
                    setLoading(false);
                }
            };

            const handleLogout = async () => {
                await supabase.auth.signOut();
                setIsLoggedIn(false);
                setUser(null);
                setCurrentPage('home');
            };

            if (showLogin || showRegister) {
                return (
                    <div style={{ minHeight: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center', padding: '20px' }}>
                        <div style={{ background: '#111827', padding: '40px', borderRadius: '16px', maxWidth: '400px', width: '100%', border: '1px solid #374151' }}>
                            <h1 style={{ color: '#3b82f6', fontSize: '24px', fontWeight: 'bold', textAlign: 'center', marginBottom: '30px' }}>SCANORA</h1>
                            
                            <div style={{ display: 'flex', marginBottom: '30px', borderBottom: '1px solid #374151' }}>
                                <button
                                    onClick={() => { setShowLogin(true); setShowRegister(false); }}
                                    style={{ 
                                        flex: 1, 
                                        padding: '12px', 
                                        background: showLogin ? '#3b82f6' : 'transparent', 
                                        color: showLogin ? '#fff' : '#9ca3af',
                                        border: 'none',
                                        cursor: 'pointer',
                                        borderBottom: showLogin ? '2px solid #3b82f6' : '2px solid transparent'
                                    }}
                                >
                                    Login
                                </button>
                                <button
                                    onClick={() => { setShowRegister(true); setShowLogin(false); }}
                                    style={{ 
                                        flex: 1, 
                                        padding: '12px', 
                                        background: showRegister ? '#3b82f6' : 'transparent', 
                                        color: showRegister ? '#fff' : '#9ca3af',
                                        border: 'none',
                                        cursor: 'pointer',
                                        borderBottom: showRegister ? '2px solid #3b82f6' : '2px solid transparent'
                                    }}
                                >
                                    Register
                                </button>
                            </div>

                            {showLogin && (
                                <form onSubmit={handleLogin}>
                                    <input name="email" type="email" placeholder="Email" className="form-input" style={{ width: '100%', padding: '12px', marginBottom: '16px', borderRadius: '8px' }} required />
                                    <input name="password" type="password" placeholder="Password" className="form-input" style={{ width: '100%', padding: '12px', marginBottom: '20px', borderRadius: '8px' }} required />
                                    <button type="submit" className="btn-primary" style={{ width: '100%', padding: '12px', borderRadius: '8px', fontSize: '16px', fontWeight: '600' }} disabled={loading}>
                                        {loading ? <span className="loading"></span> : 'Login'}
                                    </button>
                                </form>
                            )}

                            {showRegister && (
                                <form onSubmit={handleRegister}>
                                    <input name="username" type="text" placeholder="Username" className="form-input" style={{ width: '100%', padding: '12px', marginBottom: '16px', borderRadius: '8px' }} required />
                                    <input name="email" type="email" placeholder="Email" className="form-input" style={{ width: '100%', padding: '12px', marginBottom: '16px', borderRadius: '8px' }} required />
                                    <input name="password" type="password" placeholder="Password" className="form-input" style={{ width: '100%', padding: '12px', marginBottom: '20px', borderRadius: '8px' }} required />
                                    <button type="submit" className="btn-primary" style={{ width: '100%', padding: '12px', borderRadius: '8px', fontSize: '16px', fontWeight: '600' }} disabled={loading}>
                                        {loading ? <span className="loading"></span> : 'Register'}
                                    </button>
                                </form>
                            )}

                            <button
                                onClick={() => { setShowLogin(false); setShowRegister(false); }}
                                style={{ 
                                    width: '100%', 
                                    padding: '12px', 
                                    background: 'transparent', 
                                    color: '#9ca3af', 
                                    border: '1px solid #374151',
                                    borderRadius: '8px',
                                    cursor: 'pointer',
                                    marginTop: '10px'
                                }}
                            >
                                ‚Üê Back to Home
                            </button>
                        </div>
                    </div>
                );
            }

            if (currentPage === 'dashboard' && isLoggedIn) {
                return (
                    <div style={{ minHeight: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center', padding: '20px' }}>
                        <div style={{ textAlign: 'center' }}>
                            <h2 style={{ fontSize: '36px', fontWeight: 'bold', marginBottom: '20px' }}>SCANORA Dashboard</h2>
                            <p style={{ color: '#9ca3af', marginBottom: '40px' }}>
                                Welcome back, {user?.user_metadata?.username || user?.email}!
                            </p>
                            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '20px', maxWidth: '800px' }}>
                                <div className="card" style={{ padding: '30px', borderRadius: '12px' }}>
                                    <h3 style={{ marginBottom: '10px' }}>Username Recon</h3>
                                    <p style={{ color: '#9ca3af' }}>Search 500+ platforms</p>
                                </div>
                                <div className="card" style={{ padding: '30px', borderRadius: '12px' }}>
                                    <h3 style={{ marginBottom: '10px' }}>Email Analysis</h3>
                                    <p style={{ color: '#9ca3af' }}>Breach data investigation</p>
                                </div>
                                <div className="card" style={{ padding: '30px', borderRadius: '12px' }}>
                                    <h3 style={{ marginBottom: '10px' }}>IP Intelligence</h3>
                                    <p style={{ color: '#9ca3af' }}>Network mapping tools</p>
                                </div>
                            </div>
                            <button
                                onClick={handleLogout}
                                className="btn-secondary"
                                style={{ marginTop: '40px', padding: '12px 24px', borderRadius: '8px' }}
                            >
                                Logout
                            </button>
                        </div>
                    </div>
                );
            }

            return (
                <div style={{ minHeight: '100vh', position: 'relative', overflow: 'hidden' }}>
                    <div className="glow"></div>
                    
                    <nav style={{ position: 'relative', zIndex: 10, display: 'flex', justifyContent: 'space-between', alignItems: 'center', padding: '20px 40px' }}>
                        <h1 style={{ fontSize: '24px', fontWeight: 'bold', letterSpacing: '2px' }}>SCANORA</h1>
                        <div style={{ display: 'flex', gap: '30px' }}>
                            {["Dashboard", "Register", "Login", "Roster", "Features", "Pricing", "About", "Discord"].map((item, i) => (
                                <button
                                    key={i}
                                    onClick={() => handleNavClick(item)}
                                    className="nav-button"
                                    style={{ 
                                        color: '#9ca3af', 
                                        fontSize: '14px',
                                        background: 'none',
                                        border: 'none',
                                        cursor: 'pointer'
                                    }}
                                >
                                    {item}
                                </button>
                            ))}
                        </div>
                    </nav>

                    <div style={{ position: 'relative', zIndex: 10, textAlign: 'center', paddingTop: '100px', paddingBottom: '60px' }}>
                        <h2 style={{ fontSize: '48px', fontWeight: 'bold', marginBottom: '20px', lineHeight: 1.2 }}>
                            Advanced Digital Intelligence Platform
                        </h2>
                        <p style={{ fontSize: '18px', color: '#9ca3af', maxWidth: '600px', margin: '0 auto', lineHeight: 1.6 }}>
                            SCANORA represents the next generation of cyber intelligence tools,
                            combining cutting-edge technology with intuitive design for maximum
                            operational effectiveness.
                        </p>
                        <button 
                            onClick={() => setShowRegister(true)}
                            className="btn-primary"
                            style={{ marginTop: '40px', padding: '16px 32px', fontSize: '18px', borderRadius: '12px', fontWeight: '600' }}
                        >
                            Get Started
                        </button>
                    </div>
                </div>
            );
        }

        const root = createRoot(document.getElementById("root"));
        root.render(<App />);
    </script>
</body>
</html>
