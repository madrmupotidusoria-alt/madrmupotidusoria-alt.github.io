<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>SCANORA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nosifer&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            margin: 0;
            padding: 0;
            background: #000;
            color: #fff;
        }
        .glow {
            position: absolute;
            width: 600px;
            height: 600px;
            border-radius: 9999px;
            filter: blur(48px);
            background: rgba(59,130,246,0.18);
            left: calc(50% - 300px);
            top: 8rem;
            animation: float 15s ease-in-out infinite;
            z-index: 0;
        }
        @keyframes float {
            0% { transform: translate(0, 0); }
            33% { transform: translate(100px, -50px); }
            66% { transform: translate(-100px, 50px); }
            100% { transform: translate(0, 0); }
        }
        .nav-button {
            transition: all 0.3s ease;
        }
        .nav-button:hover {
            color: #fff;
            transform: translateY(-1px);
        }
        .nav-button.active {
            color: #3b82f6;
            font-weight: 600;
        }
        .form-input {
            background: #111827;
            border: 1px solid #374151;
            color: #fff;
            transition: all 0.3s ease;
        }
        .form-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        .btn-primary {
            background: #3b82f6;
            color: #fff;
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            background: #2563eb;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.3);
        }
        .btn-secondary {
            background: #374151;
            color: #fff;
            transition: all 0.3s ease;
        }
        .btn-secondary:hover {
            background: #4b5563;
        }
        .card {
            background: rgba(17, 24, 39, 0.8);
            border: 1px solid #374151;
            transition: all 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            border-color: #4b5563;
            box-shadow: 0 20px 40px rgba(59, 130, 246, 0.2);
        }
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #3b82f6;
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .error {
            color: #ef4444;
            font-size: 14px;
            margin-top: 10px;
            padding: 10px;
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 6px;
        }
        .success {
            color: #10b981;
            font-size: 14px;
            margin-top: 10px;
            padding: 10px;
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            border-radius: 6px;
        }
        @keyframes float {
            from { transform: translateY(0); }
            to { transform: translateY(-2000px); }
        }
        
        @keyframes flicker {
            0%, 100% { opacity: 1; }
            6% { opacity: 0.5; }
            8% { opacity: 1; }
            12% { opacity: 0.3; }
            15% { opacity: 1; }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        const { createRoot } = ReactDOM;

        // Wait for Supabase to load
        function initSupabase() {
            if (typeof window.supabase === 'undefined') {
                console.error('Supabase not loaded');
                return null;
            }
            
            const supabaseUrl = 'https://sb_publishable_i2050anXy9VyKvBs0_GpTg_J52BP_72.supabase.co';
            const supabaseKey = 'sb_publishable_i2050anXy9VyKvBs0_GpTg_J52BP_72';
            const { createClient } = window.supabase;
            return createClient(supabaseUrl, supabaseKey);
        }

        function App() {
            const [isLoggedIn, setIsLoggedIn] = useState(false);
            const [showLogin, setShowLogin] = useState(false);
            const [showRegister, setShowRegister] = useState(false);
            const [currentPage, setCurrentPage] = useState('home');
            const [user, setUser] = useState(null);
            const [loading, setLoading] = useState(false);
            const [error, setError] = useState('');
            const [supabase, setSupabase] = useState(null);

            // Initialize Supabase
            useEffect(() => {
                const client = initSupabase();
                if (client) {
                    setSupabase(client);
                    
                    // Check for existing session
                    const getSession = async () => {
                        try {
                            const { data: { session } } = await client.auth.getSession();
                            setUser(session?.user ?? null);
                            setIsLoggedIn(!!session?.user);
                        } catch (err) {
                            console.error('Session check error:', err);
                        }
                    };

                    getSession();

                    // Listen for auth changes
                    const { data: { subscription } } = client.auth.onAuthStateChange((_event, session) => {
                        setUser(session?.user ?? null);
                        setIsLoggedIn(!!session?.user);
                    });

                    return () => subscription.unsubscribe();
                } else {
                    setError('Failed to initialize Supabase. Please refresh the page.');
                }
            }, []);

            const handleNavClick = (item) => {
                if (item === 'Discord') {
                    window.open('https://discord.gg/xtce', '_blank');
                    return;
                }
                if (item === 'Dashboard' && !isLoggedIn) {
                    setShowLogin(true);
                    return;
                }
                if (item === 'Login') {
                    setShowLogin(true);
                    setShowRegister(false);
                    return;
                }
                if (item === 'Register') {
                    setShowRegister(true);
                    setShowLogin(false);
                    return;
                }
                if (item === 'Pricing') {
                    window.location.href = '/pricing.html';
                    return;
                }
                if (item === 'Roster') {
                    setCurrentPage('roster');
                    return;
                }
                setCurrentPage(item.toLowerCase());
            };

            const handleLogin = async (e) => {
                e.preventDefault();
                if (!supabase) {
                    setError('Supabase not initialized. Please refresh the page.');
                    return;
                }
                
                setLoading(true);
                setError('');
                const email = e.target.email.value;
                const password = e.target.password.value;
                
                try {
                    const { data, error } = await supabase.auth.signInWithPassword({
                        email,
                        password,
                    });
                    
                    if (error) {
                        setError('Login error: ' + error.message);
                    } else {
                        setIsLoggedIn(true);
                        setShowLogin(false);
                        setCurrentPage('dashboard');
                        setError('');
                        // Success message
                        const successDiv = document.createElement('div');
                        successDiv.className = 'success';
                        successDiv.textContent = 'Login successful!';
                        successDiv.style.cssText = 'color: #10b981; font-size: 14px; margin-top: 10px; padding: 10px; background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.3); border-radius: 6px;';
                        const form = document.querySelector('form');
                        if (form && !form.querySelector('.success')) {
                            form.appendChild(successDiv);
                            setTimeout(() => successDiv.remove(), 3000);
                        }
                    }
                } catch (error) {
                    setError('Login error: ' + error.message);
                } finally {
                    setLoading(false);
                }
            };

            const handleRegister = async (e) => {
                e.preventDefault();
                if (!supabase) {
                    setError('Supabase not initialized. Please refresh the page.');
                    return;
                }
                
                setLoading(true);
                setError('');
                const email = e.target.email.value;
                const password = e.target.password.value;
                const username = e.target.username.value;
                
                try {
                    const { data, error } = await supabase.auth.signUp({
                        email,
                        password,
                        options: {
                            data: {
                                username: username,
                            }
                        }
                    });
                    
                    if (error) {
                        setError('Registration error: ' + error.message);
                    } else {
                        setError('');
                        // Success message
                        const successDiv = document.createElement('div');
                        successDiv.className = 'success';
                        successDiv.textContent = 'Registration successful! Please check your email to verify.';
                        successDiv.style.cssText = 'color: #10b981; font-size: 14px; margin-top: 10px; padding: 10px; background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.3); border-radius: 6px;';
                        const form = document.querySelector('form');
                        if (form && !form.querySelector('.success')) {
                            form.appendChild(successDiv);
                            setTimeout(() => successDiv.remove(), 5000);
                        }
                        setShowRegister(false);
                        setShowLogin(true);
                    }
                } catch (error) {
                    setError('Registration error: ' + error.message);
                } finally {
                    setLoading(false);
                }
            };

            const handleLogout = async () => {
                if (supabase) {
                    await supabase.auth.signOut();
                    setIsLoggedIn(false);
                    setUser(null);
                    setCurrentPage('home');
                }
            };

            if (showLogin || showRegister) {
                return (
                    <div style={{ minHeight: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center', padding: '20px' }}>
                        <div style={{ background: '#111827', padding: '40px', borderRadius: '16px', maxWidth: '400px', width: '100%', border: '1px solid #374151' }}>
                            <h1 style={{ color: '#3b82f6', fontSize: '24px', fontWeight: 'bold', textAlign: 'center', marginBottom: '30px' }}>SCANORA</h1>
                            
                            <div style={{ display: 'flex', marginBottom: '30px', borderBottom: '1px solid #374151' }}>
                                <button
                                    onClick={() => { setShowLogin(true); setShowRegister(false); setError(''); }}
                                    style={{ 
                                        flex: 1, 
                                        padding: '12px', 
                                        background: showLogin ? '#3b82f6' : 'transparent', 
                                        color: showLogin ? '#fff' : '#9ca3af',
                                        border: 'none',
                                        cursor: 'pointer',
                                        borderBottom: showLogin ? '2px solid #3b82f6' : '2px solid transparent'
                                    }}
                                >
                                    Login
                                </button>
                                <button
                                    onClick={() => { setShowRegister(true); setShowLogin(false); setError(''); }}
                                    style={{ 
                                        flex: 1, 
                                        padding: '12px', 
                                        background: showRegister ? '#3b82f6' : 'transparent', 
                                        color: showRegister ? '#fff' : '#9ca3af',
                                        border: 'none',
                                        cursor: 'pointer',
                                        borderBottom: showRegister ? '2px solid #3b82f6' : '2px solid transparent'
                                    }}
                                >
                                    Register
                                </button>
                            </div>

                            {error && <div className="error">{error}</div>}

                            {showLogin && (
                                <form onSubmit={handleLogin}>
                                    <input name="email" type="email" placeholder="Email" className="form-input" style={{ width: '100%', padding: '12px', marginBottom: '16px', borderRadius: '8px' }} required />
                                    <input name="password" type="password" placeholder="Password" className="form-input" style={{ width: '100%', padding: '12px', marginBottom: '20px', borderRadius: '8px' }} required />
                                    <button type="submit" className="btn-primary" style={{ width: '100%', padding: '12px', borderRadius: '8px', fontSize: '16px', fontWeight: '600' }} disabled={loading}>
                                        {loading ? <span className="loading"></span> : 'Login'}
                                    </button>
                                </form>
                            )}

                            {showRegister && (
                                <form onSubmit={handleRegister}>
                                    <input name="username" type="text" placeholder="Username" className="form-input" style={{ width: '100%', padding: '12px', marginBottom: '16px', borderRadius: '8px' }} required />
                                    <input name="email" type="email" placeholder="Email" className="form-input" style={{ width: '100%', padding: '12px', marginBottom: '16px', borderRadius: '8px' }} required />
                                    <input name="password" type="password" placeholder="Password" className="form-input" style={{ width: '100%', padding: '12px', marginBottom: '20px', borderRadius: '8px' }} required />
                                    <button type="submit" className="btn-primary" style={{ width: '100%', padding: '12px', borderRadius: '8px', fontSize: '16px', fontWeight: '600' }} disabled={loading}>
                                        {loading ? <span className="loading"></span> : 'Register'}
                                    </button>
                                </form>
                            )}

                            <button
                                onClick={() => { setShowLogin(false); setShowRegister(false); setError(''); }}
                                style={{ 
                                    width: '100%', 
                                    padding: '12px', 
                                    background: 'transparent', 
                                    color: '#9ca3af', 
                                    border: '1px solid #374151',
                                    borderRadius: '8px',
                                    cursor: 'pointer',
                                    marginTop: '10px'
                                }}
                            >
                                ‚Üê Back to Home
                            </button>
                        </div>
                    </div>
                );
            }

            if (currentPage === 'dashboard' && isLoggedIn) {
                return (
                    <div style={{ minHeight: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center', padding: '20px' }}>
                        <div style={{ textAlign: 'center' }}>
                            <h2 style={{ fontSize: '36px', fontWeight: 'bold', marginBottom: '20px' }}>SCANORA Dashboard</h2>
                            <p style={{ color: '#9ca3af', marginBottom: '40px' }}>
                                Welcome back, {user?.user_metadata?.username || user?.email}!
                            </p>
                            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '20px', maxWidth: '800px' }}>
                                <div className="card" style={{ padding: '30px', borderRadius: '12px' }}>
                                    <h3 style={{ marginBottom: '10px' }}>Username Recon</h3>
                                    <p style={{ color: '#9ca3af' }}>Search 500+ platforms</p>
                                </div>
                                <div className="card" style={{ padding: '30px', borderRadius: '12px' }}>
                                    <h3 style={{ marginBottom: '10px' }}>Email Analysis</h3>
                                    <p style={{ color: '#9ca3af' }}>Breach data investigation</p>
                                </div>
                                <div className="card" style={{ padding: '30px', borderRadius: '12px' }}>
                                    <h3 style={{ marginBottom: '10px' }}>IP Intelligence</h3>
                                    <p style={{ color: '#9ca3af' }}>Network mapping tools</p>
                                </div>
                            </div>
                            <button
                                onClick={handleLogout}
                                className="btn-secondary"
                                style={{ marginTop: '40px', padding: '12px 24px', borderRadius: '8px' }}
                            >
                                Logout
                            </button>
                        </div>
                    </div>
                );
            }

            // Roster Component
            const Roster = () => {
                const [displayText, setDisplayText] = React.useState('');
                const [wordIndex, setWordIndex] = React.useState(0);
                const [charIndex, setCharIndex] = React.useState(0);
                const [direction, setDirection] = React.useState(1);

                React.useEffect(() => {
                    const words = ['XTC', '911'];
                    
                    const interval = setInterval(() => {
                        setDisplayText(words[wordIndex].slice(0, charIndex));
                        
                        const newCharIndex = charIndex + direction;
                        setCharIndex(newCharIndex);
                        
                        if (newCharIndex > words[wordIndex].length + 4) {
                            setDirection(-1);
                        } else if (newCharIndex < 0) {
                            setDirection(1);
                            setWordIndex((prev) => (prev + 1) % words.length);
                        }
                    }, 120);

                    return () => clearInterval(interval);
                }, [wordIndex, charIndex, direction]);

                const rosterMembers = [
                    { name: 'mar', image: 'https://files.catbox.moe/gh4buy.png' },
                    { name: 'tbny', image: 'https://files.catbox.moe/5pr9ud.png' },
                    { name: 'qtn', image: 'https://files.catbox.moe/5ub2h4.png' },
                    { name: 'shimmy', image: 'https://files.catbox.moe/0e4qso.png' }
                ];

                return React.createElement('div', {
                    style: {
                        margin: 0,
                        padding: 0,
                        width: '100%',
                        height: '100vh',
                        background: '#000',
                        fontFamily: "'Nosifer', cursive",
                        overflow: 'hidden',
                        position: 'relative'
                    }
                }, [
                    // Animated stars background
                    React.createElement('div', {
                        key: 'stars1',
                        style: {
                            position: 'fixed',
                            top: 0,
                            left: 0,
                            width: '2px',
                            height: '2px',
                            background: '#b400ff',
                            boxShadow: '50px 100px #b400ff, 120px 300px #b400ff, 400px 200px #b400ff, 700px 500px #b400ff, 900px 150px #b400ff, 1100px 600px #b400ff, 1400px 300px #b400ff, 1600px 700px #b400ff',
                            animation: 'float 40s linear infinite',
                            filter: 'drop-shadow(0 0 8px #b400ff)'
                        }
                    }),
                    React.createElement('div', {
                        key: 'stars2',
                        style: {
                            position: 'fixed',
                            top: 0,
                            left: 0,
                            width: '2px',
                            height: '2px',
                            background: '#b400ff',
                            boxShadow: '50px 100px #b400ff, 120px 300px #b400ff, 400px 200px #b400ff, 700px 500px #b400ff, 900px 150px #b400ff, 1100px 600px #b400ff, 1400px 300px #b400ff, 1600px 700px #b400ff',
                            animation: 'float 40s linear infinite',
                            filter: 'drop-shadow(0 0 8px #b400ff)',
                            top: '2000px'
                        }
                    }),
                    // Animated title
                    React.createElement('div', {
                        key: 'title',
                        style: {
                            position: 'fixed',
                            top: '36px',
                            left: '50%',
                            transform: 'translateX(-50%)',
                            color: '#b400ff',
                            fontSize: '64px',
                            letterSpacing: '6px',
                            textShadow: '0 0 10px #6a00ff, 0 0 40px rgba(180, 0, 255, 0.8)',
                            animation: 'flicker 3.5s infinite',
                            zIndex: 10
                        }
                    }, displayText),
                    // Roster section
                    React.createElement('div', {
                        key: 'roster',
                        style: {
                            position: 'relative',
                            padding: '300px 40px 80px',
                            color: '#b400ff',
                            zIndex: 1
                        }
                    }, [
                        React.createElement('h2', {
                            key: 'roster-title',
                            style: {
                                textAlign: 'center',
                                letterSpacing: '8px',
                                textShadow: '0 0 20px rgba(180, 0, 255, 0.7)',
                                marginBottom: '60px'
                            }
                        }, 'ROSTER'),
                        React.createElement('div', {
                            key: 'grid',
                            style: {
                                display: 'grid',
                                gridTemplateColumns: 'repeat(auto-fit, minmax(180px, 1fr))',
                                gap: '28px',
                                maxWidth: '900px',
                                margin: '0 auto'
                            }
                        }, rosterMembers.map((member, index) => 
                            React.createElement('div', {
                                key: index,
                                style: {
                                    background: 'rgba(20, 0, 30, 0.7)',
                                    border: '1px solid rgba(180, 0, 255, 0.4)',
                                    padding: '22px',
                                    textAlign: 'center',
                                    boxShadow: '0 0 30px rgba(180, 0, 255, 0.6)',
                                    transition: 'transform 0.3s ease, box-shadow 0.3s ease'
                                }
                            }, [
                                React.createElement('img', {
                                    key: 'img',
                                    src: member.image,
                                    alt: member.name,
                                    style: {
                                        width: '96px',
                                        height: '96px',
                                        borderRadius: '50%',
                                        boxShadow: '0 0 20px rgba(180, 0, 255, 0.9)',
                                        marginBottom: '14px'
                                    }
                                }),
                                React.createElement('span', {
                                    key: 'name',
                                    style: {
                                        display: 'block',
                                        letterSpacing: '4px',
                                        fontSize: '18px'
                                    }
                                }, member.name)
                            ])
                        ))
                    ])
                ]);
            };

            if (currentPage === 'roster') {
                return React.createElement(Roster, null);
            }

            return (
                <div style={{ minHeight: '100vh', position: 'relative', overflow: 'hidden' }}>
                    <div className="glow"></div>
                    
                    <nav style={{ position: 'relative', zIndex: 10, display: 'flex', justifyContent: 'space-between', alignItems: 'center', padding: '20px 40px' }}>
                        <h1 style={{ fontSize: '24px', fontWeight: 'bold', letterSpacing: '2px' }}>SCANORA</h1>
                        <div style={{ display: 'flex', gap: '30px' }}>
                            {["Dashboard", "Register", "Login", "Roster", "Features", "Pricing", "About", "Discord"].map((item, i) => (
                                <button
                                    key={i}
                                    onClick={() => handleNavClick(item)}
                                    className={`nav-button ${currentPage === item.toLowerCase() || (item === 'Roster' && currentPage === 'roster') ? 'active' : ''}`}
                                    style={{ 
                                        color: currentPage === item.toLowerCase() || (item === 'Roster' && currentPage === 'roster') ? '#3b82f6' : '#9ca3af',
                                        fontSize: '14px',
                                        background: 'none',
                                        border: 'none',
                                        cursor: 'pointer',
                                        fontWeight: currentPage === item.toLowerCase() || (item === 'Roster' && currentPage === 'roster') ? '600' : 'normal'
                                    }}
                                >
                                    {item}
                                </button>
                            ))}
                        </div>
                    </nav>

                    <div style={{ position: 'relative', zIndex: 10, textAlign: 'center', paddingTop: '100px', paddingBottom: '60px' }}>
                        <h2 style={{ fontSize: '48px', fontWeight: 'bold', marginBottom: '20px', lineHeight: 1.2 }}>
                            Advanced Digital Intelligence Platform
                        </h2>
                        <p style={{ fontSize: '18px', color: '#9ca3af', maxWidth: '600px', margin: '0 auto', lineHeight: 1.6 }}>
                            SCANORA represents the next generation of cyber intelligence tools,
                            combining cutting-edge technology with intuitive design for maximum
                            operational effectiveness.
                        </p>
                        <button 
                            onClick={() => setShowRegister(true)}
                            className="btn-primary"
                            style={{ marginTop: '40px', padding: '16px 32px', fontSize: '18px', borderRadius: '12px', fontWeight: '600' }}
                        >
                            Get Started
                        </button>
                    </div>
                </div>
            );
        }

        const root = createRoot(document.getElementById("root"));
        root.render(<App />);
    </script>
</body>
</html>
